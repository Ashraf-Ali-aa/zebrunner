{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"QPS Infrastructure Overview QPS-Infra is a dockerized QA infrastructure solution for effective Test Automation and Reporting. It is integrated by default with carina-core open source framework and uses Jenkins as a CI Tool. QPS-Infra is built on top of popular docker solutions, it includes Postgres database, Zebrunner Insights - former Zafira Reporting Tool, Jenkins Master/Slaves Nodes, Selenium Hub, SonarQube, RabbitMQ, etc. In additions it is easily intergated with 3rd party devices/browsers cloud providers like: Zebrunner Engine , MCloud , Browserstack , SauceLabs etc All components are deployed under NGiNX WebServer which can be configured in a fully secured environment QPS-Infra and its subcomponents all together can be used as an effective Test Automation infrastructure for test automation development, execution, management, etc. Purpose Welcome to the QPS-Infra Tutorial. This manual is designed to help you install, configure and maintain your system, and to optimize and extend or re-configure it to meet the changing needs of your business. In short, the aim of this manual is to explain the tasks involved in administering QPS-Infra system Audience This guide is written for all levels of administrators, from those responsible for deployment and setup, to those who oversee the entire system and its usage. In addition, some information from User Guide is intended for TestOps engineers who want to build effective Test Automation process and follow best practices. Assumed Knowledge Installation and Configuration guides are for administrators who install, deploy and Manage QPS-Infra products. It assumes the following knowledge: Docker platform and docker compose orchestration tool skills UNIX/Linux administration skills Security and server administration skills Understanding of your organization's security infrastructure, including authentication providers such as LDAP, and use of SSL Understanding of your organization's network environment and port usage User guide is for TestOps engineers who develop test automation scenarios, execute and maintain them etc. It assumes the following knowledge: Preferable Test Automation language and framework. Java/Maven/ TestNG Carina experience is a plus Understanding of the basics of Jenkins pipeline and JobDSL License Code - Apache Software License v2.0 Documentation and Site - Creative Commons Attribution 4.0 International License","title":"Overview"},{"location":"#qps-infrastructure","text":"","title":"QPS Infrastructure"},{"location":"#overview","text":"QPS-Infra is a dockerized QA infrastructure solution for effective Test Automation and Reporting. It is integrated by default with carina-core open source framework and uses Jenkins as a CI Tool. QPS-Infra is built on top of popular docker solutions, it includes Postgres database, Zebrunner Insights - former Zafira Reporting Tool, Jenkins Master/Slaves Nodes, Selenium Hub, SonarQube, RabbitMQ, etc. In additions it is easily intergated with 3rd party devices/browsers cloud providers like: Zebrunner Engine , MCloud , Browserstack , SauceLabs etc All components are deployed under NGiNX WebServer which can be configured in a fully secured environment QPS-Infra and its subcomponents all together can be used as an effective Test Automation infrastructure for test automation development, execution, management, etc.","title":"Overview"},{"location":"#purpose","text":"Welcome to the QPS-Infra Tutorial. This manual is designed to help you install, configure and maintain your system, and to optimize and extend or re-configure it to meet the changing needs of your business. In short, the aim of this manual is to explain the tasks involved in administering QPS-Infra system","title":"Purpose"},{"location":"#audience","text":"This guide is written for all levels of administrators, from those responsible for deployment and setup, to those who oversee the entire system and its usage. In addition, some information from User Guide is intended for TestOps engineers who want to build effective Test Automation process and follow best practices.","title":"Audience"},{"location":"#assumed-knowledge","text":"Installation and Configuration guides are for administrators who install, deploy and Manage QPS-Infra products. It assumes the following knowledge: Docker platform and docker compose orchestration tool skills UNIX/Linux administration skills Security and server administration skills Understanding of your organization's security infrastructure, including authentication providers such as LDAP, and use of SSL Understanding of your organization's network environment and port usage User guide is for TestOps engineers who develop test automation scenarios, execute and maintain them etc. It assumes the following knowledge: Preferable Test Automation language and framework. Java/Maven/ TestNG Carina experience is a plus Understanding of the basics of Jenkins pipeline and JobDSL","title":"Assumed Knowledge"},{"location":"#license","text":"Code - Apache Software License v2.0 Documentation and Site - Creative Commons Attribution 4.0 International License","title":"License"},{"location":"config-guide/","text":"Configuration Guide Organization Setup Register Organization Open Jenkins->Management_Jobs folder. Run \"RegisterOrganization\" providing your SCM (GitHub) organization name as folderName New folder is created with default content Create organization: Register Repository Open your organization folder Run \"RegisterRepository\" pointing to your TestNG repository (use https://github.com/qaprosoft/carina-demo as sample repo to scan) Repository should be scanned and TestNG jobs created Create Repository: Setup GitHub WebHook (onPush Job/Event) Go to your GitHub repository Click \"Settings\" tab Click \"Webhooks\" menu option Click \"Add webhook\" button Type http://your-jenkins-domain.com/jenkins/github-webhook/ into \"Payload URL\" field Select application/json in \"Content Type\" field Tick \"Send me everything.\" option Click \"Add webhook\" button Trigger onPush Job(s) After any push or merge into the master onPush-repo job is launched, suites scanned, TestNG jobs created Source Control Tools Integration For enterprise github or gitlab, you can declare the following global variables in Jenkins and the entire infrastructure will use them immediately by default: Manage jenkins -> Configure system Global properties -> Add property GITHUB_API_URL -> https://$GITHUB_HOST/api/v3 GITHUB_HOST -> github.mydomain.com GITHUB_HTML_URL -> https://$GITHUB_HOST/$GITHUB_ORGANIZATION GITHUB_ORGANIZATION -> myorganization GITHUB_SSH_URL -> git@$GITHUB_HOST:$GITHUB_ORGANIZATION Set up \"GitHub Pull Request Builder\": Open Jenkins -> Credentials Update Username and Password for \"ghprbhook-token\" credentials Go to Manage Jenkins -> Configure System Specify a value for GitHub Server API URL, for example, https://api.github.com Note: corporate versions of GitHub should have a different value, for example, https://github.mydomain.com/api/v3 Provide GitHub credentials with Admin privileges for your organization Check the \"Auto-manage webhooks\" param [Optional] update \"Commit Status Context\" to a value such as qps-infra to identify that changes in GitHub PR are automatically generated by infra Save changes Note: be sure to test integration through the Jenkins UI Test the integration with Github through the Jenkins UI Set Credentials -> Test basic connection to GitHub Set Repository owner/name -> Test Permissions to a Repository Set Issue ID/Comment -> Test adding comment to Pull Request Send Pull request to launch onPullRequest Job(s) Go to your GitHub repository Create new Pull Request * Verify in Jenkins that onPullRequest-repo,onPullRequest-repo-trigger jobs launched and succeed onPush Job/Event setup Setup GitHub WebHook Go to your GitHub repository Click \"Settings\" tab Click \"Webhooks\" menu option Click \"Add webhook\" button Type http://your-jenkins-domain.com/jenkins/github-webhook/ into \"Payload URL\" field Select application/json in \"Content Type\" field Tick \"Send me everything.\" option Click \"Add webhook\" button Trigger onPush Job(s) After any push or merge into the master onPush-repo job is launched, suites scanned, TestNG jobs created SonarQube Integration To enable sonarqube integration need to have the following components configured correctly Generate Sonarqube token Open your.domain.com/sonarqube Login with admin/admin(default) or your own credentials [OPTIONAL] change password if you need Generate user token (login icon -> My account -> security) Set up sonar credentials in Jenkins Open Manage jenkins -> Credentials -> System -> Global Credentials Add Credentials: Kind = secrect text, Secret = your sonar token, ID = sonar-token, Description = sonar-admin Go to Manage Jenkins -> Configure System -> SonarQube servers Assign the new credential to Server and Save Configure SonarQube configuration file for enabling static code analysis Create a file named .sonarqube in your project root directory Add the following properties (example from carina-demo): sonar.projectBaseDir=. sonar.projectName=carina-demo sonar.projectKey=carina-demo sonar.java.source=1.8 sonar.sources=src/main sonar.tests=src/test sonar.java.binaries=target/classes sonar.junit.reportPaths=target/surefire-reports Add the following property above the file (for multi-module maven projects): sonar.modules=carina-api,carina-aws-s3,carina-commons,carina-core,carina-crypto,carina- dataprovider,carina-appcenter,carina-proxy,carina-reporting,carina-utils,carina-webdriver Note: Each push or pull request on your repository the sonar scanner will be executed. Pull request decoration In order to enable pull request decoration (auto comments with sonar issues in the pr) follow the next steps: Open Manage jenkins -> Configure System Open Global properties section -> Add new variable with the followings params: name = GITHUB_OAUTH_TOKEN value = your github token Note: The token you are using should have writing permission over the analysing repository. Pull request created/reopened -> published with the user linked to the provided github token in line comments Troubleshooting Support Channel Join Telegram channel in case of any question","title":"Configuration Guide"},{"location":"config-guide/#configuration-guide","text":"","title":"Configuration Guide"},{"location":"config-guide/#organization-setup","text":"","title":"Organization Setup"},{"location":"config-guide/#register-organization","text":"Open Jenkins->Management_Jobs folder. Run \"RegisterOrganization\" providing your SCM (GitHub) organization name as folderName New folder is created with default content Create organization:","title":"Register Organization"},{"location":"config-guide/#register-repository","text":"Open your organization folder Run \"RegisterRepository\" pointing to your TestNG repository (use https://github.com/qaprosoft/carina-demo as sample repo to scan) Repository should be scanned and TestNG jobs created Create Repository:","title":"Register Repository"},{"location":"config-guide/#setup-github-webhook-onpush-jobevent","text":"Go to your GitHub repository Click \"Settings\" tab Click \"Webhooks\" menu option Click \"Add webhook\" button Type http://your-jenkins-domain.com/jenkins/github-webhook/ into \"Payload URL\" field Select application/json in \"Content Type\" field Tick \"Send me everything.\" option Click \"Add webhook\" button","title":"Setup GitHub WebHook (onPush Job/Event)"},{"location":"config-guide/#trigger-onpush-jobs","text":"After any push or merge into the master onPush-repo job is launched, suites scanned, TestNG jobs created","title":"Trigger onPush Job(s)"},{"location":"config-guide/#source-control-tools-integration","text":"For enterprise github or gitlab, you can declare the following global variables in Jenkins and the entire infrastructure will use them immediately by default: Manage jenkins -> Configure system Global properties -> Add property GITHUB_API_URL -> https://$GITHUB_HOST/api/v3 GITHUB_HOST -> github.mydomain.com GITHUB_HTML_URL -> https://$GITHUB_HOST/$GITHUB_ORGANIZATION GITHUB_ORGANIZATION -> myorganization GITHUB_SSH_URL -> git@$GITHUB_HOST:$GITHUB_ORGANIZATION","title":"Source Control Tools Integration"},{"location":"config-guide/#set-up-github-pull-request-builder","text":"Open Jenkins -> Credentials Update Username and Password for \"ghprbhook-token\" credentials Go to Manage Jenkins -> Configure System Specify a value for GitHub Server API URL, for example, https://api.github.com Note: corporate versions of GitHub should have a different value, for example, https://github.mydomain.com/api/v3 Provide GitHub credentials with Admin privileges for your organization Check the \"Auto-manage webhooks\" param [Optional] update \"Commit Status Context\" to a value such as qps-infra to identify that changes in GitHub PR are automatically generated by infra Save changes Note: be sure to test integration through the Jenkins UI","title":"Set up \"GitHub Pull Request Builder\":"},{"location":"config-guide/#test-the-integration-with-github-through-the-jenkins-ui","text":"Set Credentials -> Test basic connection to GitHub Set Repository owner/name -> Test Permissions to a Repository Set Issue ID/Comment -> Test adding comment to Pull Request","title":"Test the integration with Github through the Jenkins UI"},{"location":"config-guide/#send-pull-request-to-launch-onpullrequest-jobs","text":"Go to your GitHub repository Create new Pull Request * Verify in Jenkins that onPullRequest-repo,onPullRequest-repo-trigger jobs launched and succeed","title":"Send Pull request to launch onPullRequest Job(s)"},{"location":"config-guide/#onpush-jobevent-setup","text":"","title":"onPush Job/Event setup"},{"location":"config-guide/#setup-github-webhook","text":"Go to your GitHub repository Click \"Settings\" tab Click \"Webhooks\" menu option Click \"Add webhook\" button Type http://your-jenkins-domain.com/jenkins/github-webhook/ into \"Payload URL\" field Select application/json in \"Content Type\" field Tick \"Send me everything.\" option Click \"Add webhook\" button","title":"Setup GitHub WebHook"},{"location":"config-guide/#trigger-onpush-jobs_1","text":"After any push or merge into the master onPush-repo job is launched, suites scanned, TestNG jobs created","title":"Trigger onPush Job(s)"},{"location":"config-guide/#sonarqube-integration","text":"To enable sonarqube integration need to have the following components configured correctly","title":"SonarQube Integration"},{"location":"config-guide/#generate-sonarqube-token","text":"Open your.domain.com/sonarqube Login with admin/admin(default) or your own credentials [OPTIONAL] change password if you need Generate user token (login icon -> My account -> security)","title":"Generate Sonarqube token"},{"location":"config-guide/#set-up-sonar-credentials-in-jenkins","text":"Open Manage jenkins -> Credentials -> System -> Global Credentials Add Credentials: Kind = secrect text, Secret = your sonar token, ID = sonar-token, Description = sonar-admin Go to Manage Jenkins -> Configure System -> SonarQube servers Assign the new credential to Server and Save","title":"Set up sonar credentials in Jenkins"},{"location":"config-guide/#configure-sonarqube-configuration-file-for-enabling-static-code-analysis","text":"Create a file named .sonarqube in your project root directory Add the following properties (example from carina-demo): sonar.projectBaseDir=. sonar.projectName=carina-demo sonar.projectKey=carina-demo sonar.java.source=1.8 sonar.sources=src/main sonar.tests=src/test sonar.java.binaries=target/classes sonar.junit.reportPaths=target/surefire-reports Add the following property above the file (for multi-module maven projects): sonar.modules=carina-api,carina-aws-s3,carina-commons,carina-core,carina-crypto,carina- dataprovider,carina-appcenter,carina-proxy,carina-reporting,carina-utils,carina-webdriver Note: Each push or pull request on your repository the sonar scanner will be executed.","title":"Configure SonarQube configuration file for enabling static code analysis"},{"location":"config-guide/#pull-request-decoration","text":"In order to enable pull request decoration (auto comments with sonar issues in the pr) follow the next steps: Open Manage jenkins -> Configure System Open Global properties section -> Add new variable with the followings params: name = GITHUB_OAUTH_TOKEN value = your github token Note: The token you are using should have writing permission over the analysing repository. Pull request created/reopened -> published with the user linked to the provided github token in line comments","title":"Pull request decoration"},{"location":"config-guide/#troubleshooting","text":"","title":"Troubleshooting"},{"location":"config-guide/#support-channel","text":"Join Telegram channel in case of any question","title":"Support Channel"},{"location":"faq/","text":"F.A.Q (Draft) Ferox educta Lorem markdownum ramos, dura suadet Eumenides pudet; et non vultus dixit ostendens non omnis ! Auras maiorque vidi nec: timoris reddidit lumina exsul fuit Vulcani audenti, pinum ensem prohibent recursus Tyrrhenus cum silvas. Tamen faciam supplentur magnique est Aiacis parva quod incingitur, subiectaque! Caput per Numidasque copia. Retia sive: Iunonis superabat fletibus aenae. Fuerat lucida flumina et auras Insania, et et Phorbas. Arma sub nomine a tantum nefasque serpere. Nuruumque pigra exsequitur et manerem nondum frutex me partibus et necis! Finita vero gavisus, quam, nobis dextra invia contulit cupressu illius an terras quaecumque clausum mihi. Iuga raptae post, est iniectos, comantem vultus, ulla, tum frondere villo cecidit. Hactenus imas non eundem harenis violesque saevitiam agant vindicat solane est corpore agros quoque, in alta praerupit. Sit quae quod Tritonia; suras riget ille fortuna frustra missum sceleratus urbem, Troiae cum , nec. Vocem formae Sisyphe invidit post numina Adit flamma dubie muneris. Hic aequoreae viribus, a! Omnes voce, cupidine precibus: fruges dixit, discede faciente Diti . Est ut cognoscet mihi. var netbios = infringement_input_monochrome; if (null == cadTerabytePetaflops.onKeystroke(mpeg_overclocking, rippingKindle, 1)) { zebibyte -= 45 + marketReadmeWorm + gbps_external_margin; sessionWebsitePum(4, -1 - backup); } else { party += onlineSmtp(formatXmlManet, nvramDvdParse) + basic; nanometerHot = 1; batch.file += publishing_configuration(gigabitImage(modeTagPlug), peripheralSpoolingMyspace(5, newsgroupPitchJava, input_error), 17); } if (serp == card) { processTweak += primaryPim; metafile -= 4; petabyte.forum = iteration_matrix; } else { dsl = 3 + task_bar_usb; software = data(address_disk, 5 + 2); } var and_im_powerpoint = newbie - oasis / terminalPcYahoo(2, right_rdram_graphic, kbpsStation); var io = mashup_raster_ict + microcomputer_user; Pater in vate arcana et vertitur tenent, versus evolvere. Coegerat tenebris erat Thermodontiaca penates arbitrium mentita fulvo placuit potius miserabilis mensura omnis ora cortice arbor, exstinctum. Si longum, grave genitoris Iove primasque urbes: quem flet vident corniger coniugis eo, molibus est mariti quanto. Et Iuno. Secutis ex ventos Tam crescens adhaerent versantem autem foret ingenti. Sui lupis Menoeten finemque, fulgura, et agmenque , movit tepido, domo nam iubae Chrysenque relicto infantibus. Tuba ausa locis praebet, alta sunt utilis Iuno ossa illi, tunc labens? Et sed caruerunt notus paulumque formaeque: me Creten; dulces. Troiae nec in salutifer esse memorabat pariterque , moratur thalamis fidissima venter pendebant captam totoque nequit et? Visaque plena puellari artem. Crura et verso Medusae Demoleon peremi liventia contorta et stuppea testatos sequitur. Cupido fecisse! Ferus usu ferumque nefas, in nisi Abantiades est, eodem nomen, duram pennis.","title":"FAQ"},{"location":"faq/#faq-draft","text":"","title":"F.A.Q (Draft)"},{"location":"faq/#ferox-educta","text":"Lorem markdownum ramos, dura suadet Eumenides pudet; et non vultus dixit ostendens non omnis ! Auras maiorque vidi nec: timoris reddidit lumina exsul fuit Vulcani audenti, pinum ensem prohibent recursus Tyrrhenus cum silvas. Tamen faciam supplentur magnique est Aiacis parva quod incingitur, subiectaque! Caput per Numidasque copia. Retia sive: Iunonis superabat fletibus aenae. Fuerat lucida flumina et auras Insania, et et Phorbas. Arma sub nomine a tantum nefasque serpere. Nuruumque pigra exsequitur et manerem nondum frutex me partibus et necis! Finita vero gavisus, quam, nobis dextra invia contulit cupressu illius an terras quaecumque clausum mihi. Iuga raptae post, est iniectos, comantem vultus, ulla, tum frondere villo cecidit. Hactenus imas non eundem harenis violesque saevitiam agant vindicat solane est corpore agros quoque, in alta praerupit. Sit quae quod Tritonia; suras riget ille fortuna frustra missum sceleratus urbem, Troiae cum , nec.","title":"Ferox educta"},{"location":"faq/#vocem-formae-sisyphe-invidit-post-numina","text":"Adit flamma dubie muneris. Hic aequoreae viribus, a! Omnes voce, cupidine precibus: fruges dixit, discede faciente Diti . Est ut cognoscet mihi. var netbios = infringement_input_monochrome; if (null == cadTerabytePetaflops.onKeystroke(mpeg_overclocking, rippingKindle, 1)) { zebibyte -= 45 + marketReadmeWorm + gbps_external_margin; sessionWebsitePum(4, -1 - backup); } else { party += onlineSmtp(formatXmlManet, nvramDvdParse) + basic; nanometerHot = 1; batch.file += publishing_configuration(gigabitImage(modeTagPlug), peripheralSpoolingMyspace(5, newsgroupPitchJava, input_error), 17); } if (serp == card) { processTweak += primaryPim; metafile -= 4; petabyte.forum = iteration_matrix; } else { dsl = 3 + task_bar_usb; software = data(address_disk, 5 + 2); } var and_im_powerpoint = newbie - oasis / terminalPcYahoo(2, right_rdram_graphic, kbpsStation); var io = mashup_raster_ict + microcomputer_user; Pater in vate arcana et vertitur tenent, versus evolvere. Coegerat tenebris erat Thermodontiaca penates arbitrium mentita fulvo placuit potius miserabilis mensura omnis ora cortice arbor, exstinctum. Si longum, grave genitoris Iove primasque urbes: quem flet vident corniger coniugis eo, molibus est mariti quanto. Et Iuno.","title":"Vocem formae Sisyphe invidit post numina"},{"location":"faq/#secutis-ex-ventos","text":"Tam crescens adhaerent versantem autem foret ingenti. Sui lupis Menoeten finemque, fulgura, et agmenque , movit tepido, domo nam iubae Chrysenque relicto infantibus. Tuba ausa locis praebet, alta sunt utilis Iuno ossa illi, tunc labens? Et sed caruerunt notus paulumque formaeque: me Creten; dulces. Troiae nec in salutifer esse memorabat pariterque , moratur thalamis fidissima venter pendebant captam totoque nequit et? Visaque plena puellari artem. Crura et verso Medusae Demoleon peremi liventia contorta et stuppea testatos sequitur. Cupido fecisse! Ferus usu ferumque nefas, in nisi Abantiades est, eodem nomen, duram pennis.","title":"Secutis ex ventos"},{"location":"getting_started/","text":"QPS-Infra - Getting started Software prerequisites Docker requires a user with uid=1000 and gid=1000 for simple volumes sharing, etc. Note: to verify the current user uid/gid, execute id uid=1000(ubuntu) gid=1000(ubuntu) groups=1000(ubuntu),4(adm),20(dialout),24(cdrom),25(floppy),27(sudo),29(audio),30(dip),44(video),46(plugdev),102(netdev),999(docker Install docker ( Ubuntu 16.04 , Ubuntu 18.04 , MacOS ) and docker-composer Initial setup Clone qps-infra . You can also create your private repo to migrate the infrastructure easily Go to the qps-infra folder and launch the setup.sh script providing your hostname or ip address as an argument git clone https://github.com/qaprosoft/qps-infra.git cd qps-infra ./setup.sh myhost.domain.com Optional: adjust docker-compose.yml file by removing unused services. By default, it contains such group of services: NGiNX WebServer: nginx Reporting Toolset: postgres, zafira/zafira-ui, rabbitmq, elasticsearch, redis, logstash CI: jenkins-master, jenkins-slave-web, jenkins-slave-api Web and mobile selenium hubs: selenium hub, ggr, selenoid Local storage: ftp Sonarqube: sonarqube Note: It has sense to disable whole group. Also make sure to update depends_on in docker-compose and ./nginx/conf/default.conf to disable/comment services. Security setup (strongly recommended for publicly available environments) Regenerate AUTH_TOKEN_SECRET for production environment. (It should be base64 encoded value based on randomized string) Regenerate CRYPTO_SALT value (it should be randomized alpha-numeric string) Update default credentials in variables.env Note: If you change RABBITMQ_USER and RABBITMQ_PASS, please, update them in config/definitions.json and config/logstash.conf files as well Start services ./start.sh Env details After QPS-Infra startup, the following components are available. Take a look at variables.env for default credentials: Jenkins - http://demo.qaprosoft.com/jenkins Selenium Grid - http://demo.qaprosoft.com/mcloud/grid/console Zafira Reporting Tool - http://demo.qaprosoft.com/app SonarQube - http://demo.qaprosoft.com/sonarqube Note: Use your host domain address or IP. Note: admin/qaprosoft are hardcoded sonarqube credentials, and they can be updated inside the Sonar Administration panel Jenkins Setup Register Organization Open Jenkins->Management_Jobs folder. Run \"RegisterOrganization\" providing your SCM (GitHub) organization name as folderName -> New folder is created with default content Register Repository Open your organization folder Run \"RegisterRepository\" pointing to your TestNG repository (use https://github.com/qaprosoft/carina-demo as default repo to scan) -> Repository should be scanned and TestNG jobs created Run Job(s) Open scanned repository Run a job from the list e.g. \"Web-Demo-Single-Driver-Test\" -> Job should be passed Open Zafira e.g. http://demo.qaprosoft.com/app ->Test runs -> Test run result is present onPullRequest Job/Event setup Setup GitHub PullRequest plugin Open Jenkins -> Credentials Update Username and Password for \"ghprbhook-token\" credentials Trigger onPullRequest Job(s) Go to your GitHub repository Create new Pull Request -> Verify in Jenkins that onPullRequest-repo,onPullRequest-repo-trigger jobs launched and succeed onPush Job/Event setup Setup GitHub WebHook Go to your GitHub repository Click \"Settings\" tab Click \"Webhooks\" menu option Click \"Add webhook\" button Type http://your-jenkins-domain.com/jenkins/github-webhook/ into \"Payload URL\" field Select application/json in \"Content Type\" field Tick \"Send me everything.\" option Click \"Add webhook\" button Trigger onPush Job(s) -> After any push or merge into the master onPush-repo job is launched, suites scanned, TestNG jobs created Enjoy! Join Telegram channel in case of any question","title":"QPS-Infra - Getting started"},{"location":"getting_started/#qps-infra-getting-started","text":"","title":"QPS-Infra - Getting started"},{"location":"getting_started/#software-prerequisites","text":"Docker requires a user with uid=1000 and gid=1000 for simple volumes sharing, etc. Note: to verify the current user uid/gid, execute id uid=1000(ubuntu) gid=1000(ubuntu) groups=1000(ubuntu),4(adm),20(dialout),24(cdrom),25(floppy),27(sudo),29(audio),30(dip),44(video),46(plugdev),102(netdev),999(docker Install docker ( Ubuntu 16.04 , Ubuntu 18.04 , MacOS ) and docker-composer","title":"Software prerequisites"},{"location":"getting_started/#initial-setup","text":"Clone qps-infra . You can also create your private repo to migrate the infrastructure easily Go to the qps-infra folder and launch the setup.sh script providing your hostname or ip address as an argument git clone https://github.com/qaprosoft/qps-infra.git cd qps-infra ./setup.sh myhost.domain.com Optional: adjust docker-compose.yml file by removing unused services. By default, it contains such group of services: NGiNX WebServer: nginx Reporting Toolset: postgres, zafira/zafira-ui, rabbitmq, elasticsearch, redis, logstash CI: jenkins-master, jenkins-slave-web, jenkins-slave-api Web and mobile selenium hubs: selenium hub, ggr, selenoid Local storage: ftp Sonarqube: sonarqube Note: It has sense to disable whole group. Also make sure to update depends_on in docker-compose and ./nginx/conf/default.conf to disable/comment services.","title":"Initial setup"},{"location":"getting_started/#security-setup-strongly-recommended-for-publicly-available-environments","text":"Regenerate AUTH_TOKEN_SECRET for production environment. (It should be base64 encoded value based on randomized string) Regenerate CRYPTO_SALT value (it should be randomized alpha-numeric string) Update default credentials in variables.env Note: If you change RABBITMQ_USER and RABBITMQ_PASS, please, update them in config/definitions.json and config/logstash.conf files as well","title":"Security setup  (strongly recommended for publicly available environments)"},{"location":"getting_started/#start-services","text":"./start.sh","title":"Start services"},{"location":"getting_started/#env-details","text":"After QPS-Infra startup, the following components are available. Take a look at variables.env for default credentials: Jenkins - http://demo.qaprosoft.com/jenkins Selenium Grid - http://demo.qaprosoft.com/mcloud/grid/console Zafira Reporting Tool - http://demo.qaprosoft.com/app SonarQube - http://demo.qaprosoft.com/sonarqube Note: Use your host domain address or IP. Note: admin/qaprosoft are hardcoded sonarqube credentials, and they can be updated inside the Sonar Administration panel","title":"Env details"},{"location":"getting_started/#jenkins-setup","text":"","title":"Jenkins Setup"},{"location":"getting_started/#register-organization","text":"Open Jenkins->Management_Jobs folder. Run \"RegisterOrganization\" providing your SCM (GitHub) organization name as folderName -> New folder is created with default content","title":"Register Organization"},{"location":"getting_started/#register-repository","text":"Open your organization folder Run \"RegisterRepository\" pointing to your TestNG repository (use https://github.com/qaprosoft/carina-demo as default repo to scan) -> Repository should be scanned and TestNG jobs created","title":"Register Repository"},{"location":"getting_started/#run-jobs","text":"Open scanned repository Run a job from the list e.g. \"Web-Demo-Single-Driver-Test\" -> Job should be passed Open Zafira e.g. http://demo.qaprosoft.com/app ->Test runs -> Test run result is present","title":"Run Job(s)"},{"location":"getting_started/#onpullrequest-jobevent-setup","text":"","title":"onPullRequest Job/Event setup"},{"location":"getting_started/#setup-github-pullrequest-plugin","text":"Open Jenkins -> Credentials Update Username and Password for \"ghprbhook-token\" credentials","title":"Setup GitHub PullRequest plugin"},{"location":"getting_started/#trigger-onpullrequest-jobs","text":"Go to your GitHub repository Create new Pull Request -> Verify in Jenkins that onPullRequest-repo,onPullRequest-repo-trigger jobs launched and succeed","title":"Trigger onPullRequest Job(s)"},{"location":"getting_started/#onpush-jobevent-setup","text":"","title":"onPush Job/Event setup"},{"location":"getting_started/#setup-github-webhook","text":"Go to your GitHub repository Click \"Settings\" tab Click \"Webhooks\" menu option Click \"Add webhook\" button Type http://your-jenkins-domain.com/jenkins/github-webhook/ into \"Payload URL\" field Select application/json in \"Content Type\" field Tick \"Send me everything.\" option Click \"Add webhook\" button","title":"Setup GitHub WebHook"},{"location":"getting_started/#trigger-onpush-jobs","text":"-> After any push or merge into the master onPush-repo job is launched, suites scanned, TestNG jobs created","title":"Trigger onPush Job(s)"},{"location":"getting_started/#enjoy","text":"Join Telegram channel in case of any question","title":"Enjoy!"},{"location":"install-guide/","text":"Installation Guide System requirements Hardware requirements Requirements Operating System Linux Ubuntu 16.04, 18.04 Linux CentOS 7+ Amazon Linux 2 CPU 8+ Cores Memory 32 Gb RAM Free space SSD 128Gb+ of free space All in one standalone deployment supports up to 5 parallel executors for web and api tests. The most optimal EC2 instance type is t3.2xlarge with enabled \"T2/T3 Unlimited\" feature Software requirements Install docker ( Ubuntu 16.04 , Ubuntu 18.04 , Amazon Linux 2 or MacOS ) MacOS is not recommended for production usage! Install docker-composer Initial setup Clone qps-infra Generate github OAuth Apps token and put values into .env.original (GITHUB_CLIENT_ID and GITHUB_CLIENT_SECRET) [Optional] Generate new AUTH_TOKEN_SECRET/CRYPTO_SALT values and put into the variables.env Strongly recommended for publicly available environments! AUTH_TOKEN_SECRET is randomized and base64 encoded string. CRYPTO_SALT is randomized alpha-numeric string [Optional] Disable unused component according to the steps . [Optional] Update default credentials in .env.original Note: due to the huge refactoring better to ask assistance in updating credentials for all configuration files. In 5.1 it is planned to have single point of true only inside .env.original! Launch the setup.sh script providing your hostname as an argument: git clone https://github.com/qaprosoft/qps-infra.git && cd qps-infra && ./setup.sh myhost.domain.com Use public ip address if you don't have registered DNS hostname yet Start services ./start.sh After QPS-Infra startup, the following components are available. Take a look at variables.env for default credentials: Use your host domain address or IP. admin/qaprosoft are hardcoded sonarqube credentials, and they can be updated inside the Sonar Administration panel Components URL 1st Page http://demo.qaprosoft.com Jenkins http://demo.qaprosoft.com/jenkins Zebrunner Insights http://demo.qaprosoft.com/app SonarQube http://demo.qaprosoft.com/sonarqube Web Selenium Hub http://demo:demo@demo.qaprosoft.com/selenoid/wd/hub Mobile Selenium Hub http://demo:demo@demo.qaprosoft.com/mcloud/wd/hub Disable/Remove component(s) QPS-Infra contains such layers of services: Layer Containers NGiNX WebServer nginx (docker-compose.yml in a root folder) Reporting Services postgres, reporting-service, reporting-ui, zebrunner-proxy etc CI (Jenkins) jenkins-master, jenkins-slave Code Analysis sonarqube MCloud stf services, selenium-hub, ftp Embedded web selenium hub selenoid Comment/uncomment in the start.sh (stop.sh and clear.sh) appropriate line for the component that's a temporary solution for 5.0. In 5.1 more convenient way should appear Troubleshooting Support Channel Join Telegram channel in case of any question","title":"Installation Guide"},{"location":"install-guide/#installation-guide","text":"","title":"Installation Guide"},{"location":"install-guide/#system-requirements","text":"","title":"System requirements"},{"location":"install-guide/#hardware-requirements","text":"Requirements Operating System Linux Ubuntu 16.04, 18.04 Linux CentOS 7+ Amazon Linux 2 CPU 8+ Cores Memory 32 Gb RAM Free space SSD 128Gb+ of free space All in one standalone deployment supports up to 5 parallel executors for web and api tests. The most optimal EC2 instance type is t3.2xlarge with enabled \"T2/T3 Unlimited\" feature","title":"Hardware requirements"},{"location":"install-guide/#software-requirements","text":"Install docker ( Ubuntu 16.04 , Ubuntu 18.04 , Amazon Linux 2 or MacOS ) MacOS is not recommended for production usage! Install docker-composer","title":"Software requirements"},{"location":"install-guide/#initial-setup","text":"Clone qps-infra Generate github OAuth Apps token and put values into .env.original (GITHUB_CLIENT_ID and GITHUB_CLIENT_SECRET) [Optional] Generate new AUTH_TOKEN_SECRET/CRYPTO_SALT values and put into the variables.env Strongly recommended for publicly available environments! AUTH_TOKEN_SECRET is randomized and base64 encoded string. CRYPTO_SALT is randomized alpha-numeric string [Optional] Disable unused component according to the steps . [Optional] Update default credentials in .env.original Note: due to the huge refactoring better to ask assistance in updating credentials for all configuration files. In 5.1 it is planned to have single point of true only inside .env.original! Launch the setup.sh script providing your hostname as an argument: git clone https://github.com/qaprosoft/qps-infra.git && cd qps-infra && ./setup.sh myhost.domain.com Use public ip address if you don't have registered DNS hostname yet Start services ./start.sh After QPS-Infra startup, the following components are available. Take a look at variables.env for default credentials: Use your host domain address or IP. admin/qaprosoft are hardcoded sonarqube credentials, and they can be updated inside the Sonar Administration panel Components URL 1st Page http://demo.qaprosoft.com Jenkins http://demo.qaprosoft.com/jenkins Zebrunner Insights http://demo.qaprosoft.com/app SonarQube http://demo.qaprosoft.com/sonarqube Web Selenium Hub http://demo:demo@demo.qaprosoft.com/selenoid/wd/hub Mobile Selenium Hub http://demo:demo@demo.qaprosoft.com/mcloud/wd/hub","title":"Initial setup"},{"location":"install-guide/#disableremove-components","text":"QPS-Infra contains such layers of services: Layer Containers NGiNX WebServer nginx (docker-compose.yml in a root folder) Reporting Services postgres, reporting-service, reporting-ui, zebrunner-proxy etc CI (Jenkins) jenkins-master, jenkins-slave Code Analysis sonarqube MCloud stf services, selenium-hub, ftp Embedded web selenium hub selenoid Comment/uncomment in the start.sh (stop.sh and clear.sh) appropriate line for the component that's a temporary solution for 5.0. In 5.1 more convenient way should appear","title":"Disable/Remove component(s)"},{"location":"install-guide/#troubleshooting","text":"","title":"Troubleshooting"},{"location":"install-guide/#support-channel","text":"Join Telegram channel in case of any question","title":"Support Channel"},{"location":"user-guide/","text":"User Guide (Draft) How to use these features? To start there are a number of additional parameters that can be added to an existing Test Suite xml. These parameters are: jenkinsJobName - This property is just the name that Jenkins should create a job for, the normal pattern here is to include the platform name in the job itself to make it easier to find inside of Jenkins. jenkinsJobType \u2013 This property tells Jenkins what type of job it is. This field can take a \u201cweb\u201d or \u201capi\u201d value. If value set to \u201capi\u201d \u2013 Jenkins knows that there is no need to use web browser for run this Test Suite. If value set to \u201cweb\u201d \u2013 Jenkins will use web browser to run the Test. Chrome browser will be used by default. jenkinsEmail - This property takes a comma separated list of emails/distribution lists that end results of a Test Suite will be emailed to. jenkinsFailedEmail - This property takes a comma separated list of emails/distribution lists that end results of a Test Suite that contains failures will be emailed to. jenkinsRegressionPipeline - This property takes a comma separated string of the various pipelines that a specific Test Suite will be attached to. (i.e. nightly_regression_cron, full_regression_cron). This would end up creating two pipeline jobs inside of Jenkins. jenkinsEnvironments - This property takes a comma separated string of the various environments that will be tested for that particular suite. (i.e. PROD, QA,DEV,STAGE,BETA, etc...) jenkinsPipelineEnvironments - This property takes a comma separated string of the various environments that will be tested for a particular suite in a particular pipeline (i.e. PROD,QA,DEV,STAGE) jenkinsJobExecutionOrder - This property takes a number value and allows for a pipeline to be generated which will run tests in a sequential synchronous manner, compared to the default asynchronous manner. jenkinsJobExecutionMode -This property is only consumed when a jenkinsJobExecutionOrder has been set on a pipeline which would put that pipeline into a synchronous mode and takes a value of \"continue\". When that is specified if a prior job has had an error while running the next job in sequence will still pick up and run instead of halting the entire pipeline. jenkinsRegressionMatrix - This property we use for creating configuration test matrix. overrideFields - This property takes any number of custom fields that need to be available at run-time for a job to run successfully. Test Jobs (API/Web/Mobile) Jenkins Pipeline Job - this is a job that can be created for each suite and can be executed on demand or by schedule. Create a Job Open TestNG suite xml file Fill the bunch of necessary parameters in your xml: <parameter name=\"suiteOwner\" value=\"qpsdemo\"/> <parameter name=\"jenkinsJobName\" value=\"Job1\"/> <parameter name=\"jenkinsJobType\" value=\"api\"/> <parameter name=\"jenkinsEmail\" value=\"test@qaprosoft.com\"/> <parameter name=\"jenkinsEnvironments\" value=\"DEMO\"/> Commit and merge. You will see \"Job1\" Job after Scan is finished (automatic or manual). Run a Job Steps: Login to Jenkins Go to organization/repository and open a Job Click Build with Parameters and run Build When Job is Completed analyze published reports/logs (Carina reports/Zafira reports/TestNG reports) Schedule a Job Open TestNG suite xml file Fill the bunch of necessary parameters in your xml if they are absent: <parameter name=\"scheduling\" value=\"H 2 * * *\" /> Note: As a value provide regular Jenkins Cron expression.To prganize multiple schedules use \"\\n\" as separator: <parameter name=\"scheduling\" value=\"H 2 * * *\\nH 10 * * *\" /> Commit and merge. Delete a Job Delete TestNG suite xml file Commit and merge. Ask your administrator to remove the Job on Jenkins. Cron Jobs(Layer of testing) Jenkins Pipeline Cron - this is a job that can include different suites/jobs and can be executed on demand or by schedule. Create a Cron Open each TestNG suite xml file(s) Declare \"jenkinsRegressionPipeline\" property in xml: <parameter name=\"jenkinsRegressionPipeline\" value=\"nightly_regression, full_regression\"/> Commit and merge. After Scan is finished (automatic or manual) nightly_regression, full_regression crons are created in Jenkins. How to Set up Configuration Matrix Open TestNG suite xml file Declare \"jenkinsRegressionMatrix\" property in xml: <parameter name=\"jenkinsRegressionPipeline\" value=\"Carina-Demo-Regression-Pipeline\"/> <parameter name=\"jenkinsRegressionMatrix\" value=\"env: DEMO, branch: master; env:PROD, branch: prod\"/> Commit and merge. After Scan is finished (automatic or manual) Carina-Demo-Regression-Pipeline cron job is created in Jenkins. Every time you run Carina-Demo-Regression-Pipeline job it should start your suite xml child job twice for DEMO and PROD environments using appropriate branches. Note: Any param values pairs can be provided. Comma separated - for single job params. Semicolon separated for multiple child job params. Run a Cron Steps: Go to organization/repository and open a Cron Job Note: There is a \"CRON\" view for such kind of jobs Click Build with Parameters and run Build Cron Job should trigger children jobs according to desired configuration matrix When Cron Job is Completed analyze children jobs' reports/logs (Carina reports/Zafira reports/TestNG reports) Schedule a Cron Open any child TestNG suite xml file Declare \"jenkinsRegressionScheduling\" parameter : <parameter name=\"jenkinsRegressionPipeline\" value=\"Carina-Demo-Regression-Pipeline\"/> <parameter name=\"jenkinsRegressionScheduling\" value=\"H 2 * * *\" /> Commit and merge. After Scan is finished (automatic or manual) Carina-Demo-Regression-Pipeline is created and sheduled to run periodically in Jenkins. Delete a Cron Open each TestNG suite xml file(s) and remove declaration of \"jenkinsRegressionPipeline\" property. Commit and merge. Ask your administrator to delete Cron job in Jenkins Troubleshooting Support Channel Join Telegram channel in case of any question","title":"User Guide"},{"location":"user-guide/#user-guide-draft","text":"","title":"User Guide (Draft)"},{"location":"user-guide/#how-to-use-these-features","text":"To start there are a number of additional parameters that can be added to an existing Test Suite xml. These parameters are: jenkinsJobName - This property is just the name that Jenkins should create a job for, the normal pattern here is to include the platform name in the job itself to make it easier to find inside of Jenkins. jenkinsJobType \u2013 This property tells Jenkins what type of job it is. This field can take a \u201cweb\u201d or \u201capi\u201d value. If value set to \u201capi\u201d \u2013 Jenkins knows that there is no need to use web browser for run this Test Suite. If value set to \u201cweb\u201d \u2013 Jenkins will use web browser to run the Test. Chrome browser will be used by default. jenkinsEmail - This property takes a comma separated list of emails/distribution lists that end results of a Test Suite will be emailed to. jenkinsFailedEmail - This property takes a comma separated list of emails/distribution lists that end results of a Test Suite that contains failures will be emailed to. jenkinsRegressionPipeline - This property takes a comma separated string of the various pipelines that a specific Test Suite will be attached to. (i.e. nightly_regression_cron, full_regression_cron). This would end up creating two pipeline jobs inside of Jenkins. jenkinsEnvironments - This property takes a comma separated string of the various environments that will be tested for that particular suite. (i.e. PROD, QA,DEV,STAGE,BETA, etc...) jenkinsPipelineEnvironments - This property takes a comma separated string of the various environments that will be tested for a particular suite in a particular pipeline (i.e. PROD,QA,DEV,STAGE) jenkinsJobExecutionOrder - This property takes a number value and allows for a pipeline to be generated which will run tests in a sequential synchronous manner, compared to the default asynchronous manner. jenkinsJobExecutionMode -This property is only consumed when a jenkinsJobExecutionOrder has been set on a pipeline which would put that pipeline into a synchronous mode and takes a value of \"continue\". When that is specified if a prior job has had an error while running the next job in sequence will still pick up and run instead of halting the entire pipeline. jenkinsRegressionMatrix - This property we use for creating configuration test matrix. overrideFields - This property takes any number of custom fields that need to be available at run-time for a job to run successfully.","title":"How to use these features?"},{"location":"user-guide/#test-jobs-apiwebmobile","text":"Jenkins Pipeline Job - this is a job that can be created for each suite and can be executed on demand or by schedule.","title":"Test Jobs (API/Web/Mobile)"},{"location":"user-guide/#create-a-job","text":"Open TestNG suite xml file Fill the bunch of necessary parameters in your xml: <parameter name=\"suiteOwner\" value=\"qpsdemo\"/> <parameter name=\"jenkinsJobName\" value=\"Job1\"/> <parameter name=\"jenkinsJobType\" value=\"api\"/> <parameter name=\"jenkinsEmail\" value=\"test@qaprosoft.com\"/> <parameter name=\"jenkinsEnvironments\" value=\"DEMO\"/> Commit and merge. You will see \"Job1\" Job after Scan is finished (automatic or manual).","title":"Create a Job"},{"location":"user-guide/#run-a-job","text":"Steps: Login to Jenkins Go to organization/repository and open a Job Click Build with Parameters and run Build When Job is Completed analyze published reports/logs (Carina reports/Zafira reports/TestNG reports)","title":"Run a Job"},{"location":"user-guide/#schedule-a-job","text":"Open TestNG suite xml file Fill the bunch of necessary parameters in your xml if they are absent: <parameter name=\"scheduling\" value=\"H 2 * * *\" /> Note: As a value provide regular Jenkins Cron expression.To prganize multiple schedules use \"\\n\" as separator: <parameter name=\"scheduling\" value=\"H 2 * * *\\nH 10 * * *\" /> Commit and merge.","title":"Schedule a Job"},{"location":"user-guide/#delete-a-job","text":"Delete TestNG suite xml file Commit and merge. Ask your administrator to remove the Job on Jenkins.","title":"Delete a Job"},{"location":"user-guide/#cron-jobslayer-of-testing","text":"Jenkins Pipeline Cron - this is a job that can include different suites/jobs and can be executed on demand or by schedule.","title":"Cron Jobs(Layer of testing)"},{"location":"user-guide/#create-a-cron","text":"Open each TestNG suite xml file(s) Declare \"jenkinsRegressionPipeline\" property in xml: <parameter name=\"jenkinsRegressionPipeline\" value=\"nightly_regression, full_regression\"/> Commit and merge. After Scan is finished (automatic or manual) nightly_regression, full_regression crons are created in Jenkins.","title":"Create a Cron"},{"location":"user-guide/#how-to-set-up-configuration-matrix","text":"Open TestNG suite xml file Declare \"jenkinsRegressionMatrix\" property in xml: <parameter name=\"jenkinsRegressionPipeline\" value=\"Carina-Demo-Regression-Pipeline\"/> <parameter name=\"jenkinsRegressionMatrix\" value=\"env: DEMO, branch: master; env:PROD, branch: prod\"/> Commit and merge. After Scan is finished (automatic or manual) Carina-Demo-Regression-Pipeline cron job is created in Jenkins. Every time you run Carina-Demo-Regression-Pipeline job it should start your suite xml child job twice for DEMO and PROD environments using appropriate branches. Note: Any param values pairs can be provided. Comma separated - for single job params. Semicolon separated for multiple child job params.","title":"How to Set up Configuration Matrix"},{"location":"user-guide/#run-a-cron","text":"Steps: Go to organization/repository and open a Cron Job Note: There is a \"CRON\" view for such kind of jobs Click Build with Parameters and run Build Cron Job should trigger children jobs according to desired configuration matrix When Cron Job is Completed analyze children jobs' reports/logs (Carina reports/Zafira reports/TestNG reports)","title":"Run a Cron"},{"location":"user-guide/#schedule-a-cron","text":"Open any child TestNG suite xml file Declare \"jenkinsRegressionScheduling\" parameter : <parameter name=\"jenkinsRegressionPipeline\" value=\"Carina-Demo-Regression-Pipeline\"/> <parameter name=\"jenkinsRegressionScheduling\" value=\"H 2 * * *\" /> Commit and merge. After Scan is finished (automatic or manual) Carina-Demo-Regression-Pipeline is created and sheduled to run periodically in Jenkins.","title":"Schedule a Cron"},{"location":"user-guide/#delete-a-cron","text":"Open each TestNG suite xml file(s) and remove declaration of \"jenkinsRegressionPipeline\" property. Commit and merge. Ask your administrator to delete Cron job in Jenkins","title":"Delete a Cron"},{"location":"user-guide/#troubleshooting","text":"","title":"Troubleshooting"},{"location":"user-guide/#support-channel","text":"Join Telegram channel in case of any question","title":"Support Channel"}]}